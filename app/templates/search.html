<!--
Kalimul Kaif, David Lee, Ethan Saldanha, Mottaqi Abedin
MKED
SoftDev
P01 - ArRESTed Development
2025-12-22
time spent: 0 hr
-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Search Jobs</title>

    <link rel="stylesheet" href="../static/search.css"/>
    <link rel="stylesheet" href="../static/nav.css" />

    <style>
      textarea {
        flex: 1;
      }
    </style>
  </head>
  <body>
    <nav>
      <ul class="nav-links">
        <li><a href="{{ url_for('homepage') }}">Home Page</a></li>
        <li><a href="{{ url_for('profile') }}">My Profile</a></li>
        <li><a href="{{ url_for('search') }}">Search</a></li>
        <li><a href="{{ url_for('my_jobs') }}">My Jobs</a></li>
        <li><a href="{{ url_for('logout') }}">LOGOUT</a></li>
      </ul>
    </nav>

    <h1>Search Jobs</h1>

    {% if keyword is defined %}
      <h2>
        Results for "{{ keyword }}"
        {% if location %} in "{{ location }}"{% endif %}
      </h2>
    {% else %}
      <p>Use the search bar on the homepage to search for jobs.</p>
    {% endif %}

    {% if error is defined and error %}
      <p style="color:red;">{{ error }}</p>
    {% endif %}

    {% if employers is defined and employers %}
      {% for employer, jobs in employers.items() %}
        <h3>{{ employer }}</h3>
        <ul>
          {% for job in jobs %}
            <li>
              <!-- job[0] = location name; job[1]/[2] = lat/lon (for map later) -->
              {{ job[0] }}
              <br>
                <a href="{{ url_for('job_detail',
                                    employer=employer,
                                    location_name=job[0],
                                    lat=job[1],
                                    lon=job[2]) }}">
                  View details
                </a>
            </li>
          {% endfor %}
        </ul>
        <hr>
      {% endfor %}
    {% elif keyword is defined %}
      <p>No jobs found for that search.</p>
    {% endif %}
  </body>
</html>
