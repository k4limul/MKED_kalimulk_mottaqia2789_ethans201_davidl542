<!--
Kalimul Kaif, David Lee, Ethan Saldanha, Mottaqi Abedin
MKED
SoftDev
P01 - ArRESTed Development
2025-12-22
time spent: 0 hr
-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Search Jobs</title>

    <link rel="stylesheet" href="../static/search.css"/>
    <link rel="stylesheet" href="../static/nav.css" />

    <style>
      textarea {
        flex: 1;
      }
    </style>
  </head>
  <body>
    <nav>
      <ul class="nav-links">
        <li><a href="{{ url_for('homepage') }}">Home Page</a></li>
        <li><a href="{{ url_for('profile') }}">My Profile</a></li>
        <li><a href="{{ url_for('search') }}">Search</a></li>
        <li><a href="{{ url_for('logout') }}">LOGOUT</a></li>
      </ul>
    </nav>

    <h1>Search Jobs</h1>

    {% if keyword is defined %}
      <h2>
        Results for "{{ keyword }}"
        {% if location %} in "{{ location }}"{% endif %}
      </h2>
    {% else %} 
      <p>Use the search bar on the homepage to search for jobs.</p>
    {% endif %}

    {% if error is defined and error %}
      <p style="color:red;">{{ error }}</p>
    {% endif %}

    {% if jobs is defined and jobs %}
      {% for job in jobs %}
        <h3>{{ job['employer'] }}</h3>
        <ul>
          {% for location in job['locations'] %}
            <li>
              {{ location.get('LocationName', 'Unknown') }}
              <br>
              <a href="{{ url_for('job_detail',
                                  job_title=keyword,
                                  employer=job['employer'],
                                  location_name=location.get('LocationName'),
                                  lat=location.get('Latitude'),
                                  lon=location.get('Longitude'),
                                  schedule=job.get('schedule', {}).get('Name', ''),
                                  start_date=job.get('start', ''),
                                  end_date=job.get('end', ''),
                                  link=job.get('link', ''),
                                  requirements='|'.join(job.get('requirements', []))) }}">
                View details
              </a>
            </li>
          {% endfor %}
        </ul>
        <hr>
      {% endfor %}
    {% elif keyword is defined %}
      <p>No jobs found for that search.</p>
    {% endif %}

  </body>
</html>